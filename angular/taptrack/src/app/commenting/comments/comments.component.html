<div *ngIf="comments">
  <div class="content-wrapper">
    <div class="content-item" *ngFor="let comment of comments">
      <h4>Created by
        <b matTooltip="{{comment.author.email}}">{{comment.author.username}}</b>
        <span matTooltip="{{comment.created | date:'d MMM YYYY HH:mm'}}">
          {{dateBeautifier.beatify(comment.created)}}
        </span>
      </h4>
      <h4 *ngIf="comment.lastUpdated!==comment.created">Updated
        <span matTooltip="{{comment.lastUpdated| date:'d MMM YYYY HH:mm'}}">
          {{dateBeautifier.beatify(comment.lastUpdated)}}
        </span>
      </h4>
      <md-editor *ngIf="comment.mode === 'preview'" height="100%" mode="preview" [ngModel]="comment.text"></md-editor>
      <button *ngIf="comment.isEditable" type="button" class="btn btn-primary" (click)="goToEdit(comment)">Edit</button>
      <app-comment-update *ngIf="comment.mode === 'editor'" [comment]="comment"></app-comment-update>
    </div>
  </div>
  <pagination [totalItems]="comments.length" (pageChanged)="pageChanged($event)"></pagination>
</div>
<form [formGroup]="form" (ngSubmit)="onSubmit(model)" style="margin-bottom: 3em">
  <formly-form [form]="form" [fields]="fields" [model]="model"></formly-form>
  <button type="submit" class="btn btn-default" [disabled]="!form.valid">Submit</button>
</form>
